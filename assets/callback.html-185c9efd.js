import{c as x,r as B,u as e,N as r,O as n,P as c,a5 as l,a7 as _,Q as o,aa as V,Z as h,_ as P,a4 as z,G as E}from"./framework-65876511.js";import{N as m,a as L}from"./Spin-60634900.js";import{N as O,a as C}from"./Space-864a2fe8.js";import"./app-15c08dc1.js";import"./Close-07b122a2.js";const R=o("b",null,"client_id: ",-1),U=o("b",null,"client_secret: ",-1),j=o("b",null,"redirect_uri: ",-1),A=o("b",null,"refresh_token:",-1),D=x({__name:"Callback",setup(T){const s=new URL(window.location.href),u=s.searchParams.get("code"),p=s.searchParams.get("state"),d=s.searchParams.get("error"),S=s.searchParams.get("error_description"),[f,k,v]=atob(p).split("::"),t=B();return u&&!d&&(async()=>{const a=new URLSearchParams;a.append("client_id",f),a.append("client_secret",k),a.append("code",u),a.append("grant_type","authorization_code"),a.append("redirect_uri",v),fetch("https://www.googleapis.com/oauth2/v4/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(i=>i.json()).then(i=>{console.log(i),t.value=i})})(),(a,i)=>!e(u)||e(d)?(r(),n(e(m),{key:0,title:e(d)||"Error",type:"error"},{default:c(()=>[l(_(e(S)),1)]),_:1},8,["title"])):(r(),n(e(C),{key:1,vertical:"",size:"large"},{default:c(()=>{var y,b,g;return[o("p",null,[R,l(_(e(f)),1)]),o("p",null,[U,l(_(e(k)),1)]),o("p",null,[j,l(_(e(v)),1)]),(y=t.value)!=null&&y.error||(b=t.value)!=null&&b.error_description?(r(),n(e(m),{key:0,title:(g=t.value)==null?void 0:g.error,type:"error"},{default:c(()=>[l(_(t.value.error_description),1)]),_:1},8,["title"])):V("v-if",!0),h(e(C),{vertical:""},{default:c(()=>{var w,N;return[A,(w=t.value)!=null&&w.access_token?(r(),n(e(m),{key:0,title:"Web client",type:"warning"},{default:c(()=>[l(" The refresh_token is only returned once if you use a web client. ")]),_:1})):(N=t.value)!=null&&N.refresh_token?(r(),n(e(O),{key:2,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(r(),n(e(L),{key:1}))]}),_:1})]}),_:1}))}});const G=P(D,[["__file","Callback.vue"]]),I=x({__name:"callback.html",setup(T){return(s,u)=>{const p=E("NaiveClient");return r(),z("div",null,[h(p,null,{default:c(()=>[h(e(G))]),_:1})])}}}),H=P(I,[["__file","callback.html.vue"]]);export{H as default};
