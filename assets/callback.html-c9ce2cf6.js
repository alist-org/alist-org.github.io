import{c as P,r as E,u as e,N as c,O as s,P as l,a5 as o,a7 as n,Q as a,aa as C,Z as _,G as k,_ as S,a4 as I}from"./framework-65876511.js";import{N as g}from"./Alert-2e1cf3a5.js";import{N as w}from"./Space-ccac3753.js";import"./app-1bf0de2e.js";import"./Close-511d8f95.js";const L=a("b",null,"client_id: ",-1),O=a("b",null,"client_secret: ",-1),R=a("b",null,"redirect_uri: ",-1),U=a("b",null,"refresh_token",-1),j=P({__name:"Callback",setup(B){const i="a78d5a69054042fa936f6c77f9a0ae8b",p="9c119bbb04b346d2a52aa64401936b2b",u="https://alist.nn.ci/tool/yandex/callback",d=new URL(window.location.href),m=d.searchParams.get("code"),f=d.searchParams.get("error"),T=d.searchParams.get("error_description"),t=E();return m&&!f&&(async()=>{const r=new URLSearchParams;r.append("grant_type","authorization_code"),r.append("client_id",i),r.append("client_secret",p),r.append("code",m||"");const h=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:r})).json();t.value=h})(),(r,V)=>{const h=k("NSpin"),z=k("NInput");return!e(m)||e(f)?(c(),s(e(g),{key:0,title:e(f)||"Error",type:"error"},{default:l(()=>[o(n(e(T)),1)]),_:1},8,["title"])):(c(),s(e(w),{key:1,vertical:"",size:"large"},{default:l(()=>{var b,v,y,N;return[a("p",null,[L,o(n(i))]),a("p",null,[O,o(n(p))]),a("p",null,[R,o(n(u))]),(b=t.value)!=null&&b.error||(v=t.value)!=null&&v.error_description?(c(),s(e(g),{key:0,title:(y=t.value)==null?void 0:y.error,type:"error"},{default:l(()=>[o(n(t.value.error_description),1)]),_:1},8,["title"])):C("v-if",!0),(N=t.value)!=null&&N.refresh_token?C("v-if",!0):(c(),s(h,{key:1})),_(e(w),{vertical:""},{default:l(()=>{var x;return[U,_(z,{type:"textarea",autosize:"",readonly:"",value:(x=t.value)==null?void 0:x.refresh_token},null,8,["value"])]}),_:1})]}),_:1}))}}});const A=S(j,[["__file","Callback.vue"]]),D=P({__name:"callback.html",setup(B){return(i,p)=>{const u=k("NaiveClient");return c(),I("div",null,[_(u,null,{default:l(()=>[_(e(A))]),_:1})])}}}),H=S(D,[["__file","callback.html.vue"]]);export{H as default};
