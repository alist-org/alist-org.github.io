import{_ as h,a as m,b as v,c as f,d as g,e as x,f as A,g as b,h as I,i as B}from"./onedrive_app_user-d7abb45b.js";import{_ as D,N as k,a9 as y,Q as e,W as t,a1 as n,P as i,ag as d,G as o}from"./framework-95cb4087.js";const T={},E=d('<h1 id="onedrive-app" tabindex="-1"><a class="header-anchor" href="#onedrive-app" aria-hidden="true">#</a> OneDrive APP</h1><h2 id="好处以及注意事项" tabindex="-1"><a class="header-anchor" href="#好处以及注意事项" aria-hidden="true">#</a> 好处以及注意事项</h2><ol><li><p>好处是只授权一次管理员登录，后续添加参数时用一样的，在添加时除了邮箱哪里不同，别的都一样</p><ul><li>例如E5 25个5T的账号，你提前登录初始化完毕后，直接CV之前的参数即可，不用像以前一样每次都得去获取刷新令牌时间一长还失效</li><li>A1 A1P等可以分发的账号更多(500 - <strong>无限</strong>)</li></ul></li><li><p>这样的方式管理员授权后，可以随意查看组织中每个成员的账号，泄露了自己的文件</p><ul><li>建议自己申请 OneDrive E5 去好一些</li></ul></li></ol><hr><p>首先使用个人或者组织账号登录</p>',5),M={href:"https://entra.microsoft.com/#view/Microsoft_AAD_IAM/TenantOverview.ReactView?Microsoft_AAD_IAM_legacyAADRedirect=true",target:"_blank",rel:"noopener noreferrer"},C=d('<p><img src="'+h+'" alt="onedriveapp"></p><h2 id="新建过程" tabindex="-1"><a class="header-anchor" href="#新建过程" aria-hidden="true">#</a> 新建过程</h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>请仔细阅读下面的 <strong><code>序号，依次添加</code></strong> ，如有错误可及时反馈</p></div>',3),V=e("li",null,[e("p",null,"注册一个应用，类型自己选，建议选第三吧")],-1),L={href:"https://entra.microsoft.com/TokenAuthorize",target:"_blank",rel:"noopener noreferrer"},N=e("p",null,[e("img",{src:m,alt:"onedriveapp"})],-1),P=e("p",null,[e("img",{src:v,alt:"onedriveapp"})],-1),U=e("p",null,[t("客户端秘钥拿到了，去授权一下使用的 "),e("strong",null,[e("code",null,"API")]),t("，依旧跟着下图获取即可")],-1),O=e("p",null,[e("img",{src:f,alt:"onedriveapp"})],-1),Z=e("p",null,"API授权后，我们去授权组织应用",-1),K=e("ul",null,[e("li",null,[t("左侧侧边栏 ---> 企业应用程序 ---> 所有应用程序 ---> "),e("strong",null,"{选择我们开始新建的哪个应用名称}"),t(" ---> 权限 ---> 点击 代表"),e("code",null,"xxxx"),t("授予管理员同意")])],-1),w=e("p",null,[e("img",{src:g,alt:"onedriveapp"})],-1),z=e("p",null,"注意事项",-1),F=e("ul",null,[e("li",null,"如果你在开始注册应用时，回调参数不是一样的可能点击授权时会报错，记得写一样的"),e("li",null,[t("如何查看是否授权成功，未授权时页面是提示"),e("code",null,"未发现该应用程序具有管理员许可的授权"),t("，授权成功后刷新一下页面会看到三条API权限如下图所示 "),e("ul",null,[e("li",null,"上面是未授权时的样子，下面是授权后的样子（授权后刷新页面即可）")])])],-1),R=e("p",null,[e("img",{src:x,alt:"onedriveapp"})],-1),J=e("p",null,[t("通过开始到现在 我们分别拿到了如下参数：租户ID"),e("sup",null,"1"),t("，注册应用"),e("sup",null,"2"),t("，拿到客户端ID/秘钥"),e("sup",null,"3"),t("，授权API/管理员API"),e("sup",null,"4")],-1),q=e("div",{class:"language-html line-numbers-mode","data-ext":"html"},[e("pre",{class:"language-html"},[e("code",null,`https://login.microsoftonline.com/{租户ID或者common}/adminConsent?client_id={客户端ID}&redirect_uri={注册应用时的回调URL}
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),S=e("p",null,[e("img",{src:A,alt:"onedriveapp"})],-1),X=e("p",null,"如果你按照拼写好后的链接也登录了发现跳转到了一个空白页面，例如下面示例代码和图片中的就是授权成功了不用担心",-1),Y=e("div",{class:"language-text line-numbers-mode","data-ext":"text"},[e("pre",{class:"language-text"},[e("code",null,`https://entra.microsoft.com/TokenAuthorize?admin_consent=True&tenant={租户ID}#
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),j=e("p",null,[e("img",{src:b,alt:"onedriveapp"})],-1),H=e("h2",{id:"填写示例",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#填写示例","aria-hidden":"true"},"#"),t(" 填写示例")],-1),W=e("p",null,[t("将上述过程中获取得到的值依次填入即可，如果哪个邮箱你不知道是什么了 可以通过"),e("a",{href:"#%E6%9F%A5%E7%9C%8B%E7%BB%84%E7%BB%87%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7"},[e("strong",null,"查看组织所有用户")]),t("来查找")],-1),Q=e("p",null,[e("img",{src:I,alt:"onedriveapp"})],-1),G=e("h2",{id:"查看组织所有用户",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#查看组织所有用户","aria-hidden":"true"},"#"),t(" 查看组织所有用户")],-1),$=e("p",null,[t("如果不知道自己的OneDrive组织有多少用户可以前往下面的链接登录 "),e("code",null,"admin"),t("账号查看")],-1),ee={href:"https://admin.microsoft.com/Adminportal/Home?source=applauncher#/users",target:"_blank",rel:"noopener noreferrer"},te=e("p",null,[e("img",{src:B,alt:"onedriveapp"})],-1),ne=e("h2",{id:"错误提示",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#错误提示","aria-hidden":"true"},"#"),t(" 错误提示")],-1),le=e("ul",null,[e("li",null,[t("提示："),e("strong",null,"Either scp or roles claim need to be present in the token"),t(" 错误")])],-1),ie=e("code",null,"4",-1),oe=e("h3",{id:"默认使用的下载方式",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#默认使用的下载方式","aria-hidden":"true"},"#"),t(" 默认使用的下载方式")],-1);function se(ae,re){const c=o("ExternalLinkIcon"),l=o("Badge"),p=o("Tabs"),_=o("BiliBili"),u=o("Mermaid");return k(),y("div",null,[E,e("p",null,[e("strong",null,[e("a",M,[t("https://entra.microsoft.com/#view/Microsoft_AAD_IAM/TenantOverview.ReactView?Microsoft_AAD_IAM_legacyAADRedirect=true"),n(c)])])]),e("p",null,[t("登录后获取我们的"),n(l,{text:"租户ID",type:"info",vertical:"middle"})]),C,n(p,{id:"58",data:[{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"}],"tab-id":"onedrive_app"},{tab0:i(({title:s,value:a,isActive:r})=>[e("ol",null,[V,e("li",null,[e("p",null,[t("重定向URL(回调参数)，类型选择Web，参数填写： "),e("strong",null,[e("a",L,[t("https://entra.microsoft.com/TokenAuthorize"),n(c)])]),t(" ，否则后面授权时无法授权")])]),e("li",null,[e("p",null,[t("填好后点击下方的注册 跳转后就可以看到"),n(l,{text:"客户端ID",type:"info",vertical:"middle"})])])]),N]),tab1:i(({title:s,value:a,isActive:r})=>[e("p",null,[t("我们去获取一个客户端秘钥，按照下图获取即可，记得"),n(l,{text:"客户端秘钥",type:"info",vertical:"middle"}),t("要及时保存，只会出现一次")]),P]),tab2:i(({title:s,value:a,isActive:r})=>[U,O]),tab3:i(({title:s,value:a,isActive:r})=>[Z,K,w,z,F,R]),tab4:i(({title:s,value:a,isActive:r})=>[J,e("p",null,[t("然后通过下面的格式最终授权一下即可，分别是"),n(l,{text:"租户ID",type:"info",vertical:"middle"}),n(l,{text:"客户端ID",type:"info",vertical:"middle"}),n(l,{text:"回调参数URL",type:"info",vertical:"middle"}),t("改成自己的最终登录收取即可")]),q,S,X,Y,j]),_:1}),H,W,Q,n(_,{bvid:"BV1Ro4y1s725",ratio:"16:9","low-quality":"","no-danmaku":""}),G,$,e("p",null,[e("strong",null,[e("a",ee,[t("https://admin.microsoft.com/Adminportal/Home?source=applauncher#/users"),n(c)])])]),te,ne,le,e("p",null,[t("是因为你没有在第"),ie,t("步的时候进行 "),n(l,{text:"代表xxxx授予管理员同意",type:"info",vertical:"middle"}),t(" 导致的，注意查看第四步下面的提示")]),oe,n(u,{id:"mermaid-196",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57NaXjYtfr6898mO7hd79z6btvPpnv73e+ZzgdSn5eSXJ2ckFpUohDhxKQBBcUllTqpCoqFCWmZOjpVyUlKaTnFJUX52qpVympkZlK1bnplSkmFlVFChk5yfk18ElEtLQ9ZuBNWelmZuam4KN8HY2BjVBJOCCoi20qT0osSCDIXMlFRDhWiFWLBooiGYSs1LgXKjjQ2MYq2srIrzc1OTcxKLi22BoAbi2ZpEo2igb591bH+xbt/TJe0QI8CqXFLTFOBaYC6zNIMoMIx+NmfNszm7nuxe/HxCW6yuHlDvy4ZOPV07rAYmGUZDVIYG+RBUnJyTmZwNCkwlPT39lKLMstSiYv3k/Nzc/Dy9jJLcHOXy1KSUxDLd52unPZ+6VAlJTxIZepKJ1gMAZ1jb4A=="})])}const pe=D(T,[["render",se],["__file","onedrive_app.html.vue"]]);export{pe as default};
