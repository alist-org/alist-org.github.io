import{_ as o}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as l,c as i,a,b as e,e as t,d as s,r}from"./app.5bcbf931.js";const p={},c=t('<h1 id="\u4ECE\u6E90\u7801\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#\u4ECE\u6E90\u7801\u8FD0\u884C" aria-hidden="true">#</a> \u4ECE\u6E90\u7801\u8FD0\u884C</h1><div class="custom-container danger"><p class="custom-container-title">\u8B66\u544A</p><p>\u6B64\u6B65\u9AA4\u4EC5\u9002\u7528\u4E8E\u9700\u8981\u81EA\u884C\u4FEE\u6539\u6E90\u4EE3\u7801\u7684\u7528\u6237\u3002 \u4E0D\u660E\u767D\u7684\u8BF7\u8DF3\u8FC7\u3002</p></div><h2 id="\u73AF\u5883\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u51C6\u5907" aria-hidden="true">#</a> \u73AF\u5883\u51C6\u5907</h2><p>\u9996\u5148\uFF0C\u4F60\u9700\u8981\u4E00\u4E2A\u6709<code>git</code>\uFF0C<code>nodejs</code>\uFF0C<code>pnpm</code>\uFF0C<code>golang&gt;=1.18</code>\uFF0C<code>gcc</code>\u7684\u73AF\u5883</p><h2 id="\u6784\u5EFA\u524D\u7AEF" tabindex="-1"><a class="header-anchor" href="#\u6784\u5EFA\u524D\u7AEF" aria-hidden="true">#</a> \u6784\u5EFA\u524D\u7AEF</h2>',5),d=s("\u514B\u9686 "),b={href:"https://github.com/alist-org/alist-web",target:"_blank",rel:"noopener noreferrer"},v=s("https://github.com/alist-org/alist-web"),k=s(" \uFF0C\u6267\u884C "),u=a("code",null,"pnpm && pnpm build",-1),g=s(" \u5F97\u5230 dist \u76EE\u5F55\u4E0B\u7684\u76EE\u6807\u6587\u4EF6"),m=a("h2",{id:"\u6784\u5EFA\u540E\u7AEF",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#\u6784\u5EFA\u540E\u7AEF","aria-hidden":"true"},"#"),s(" \u6784\u5EFA\u540E\u7AEF")],-1),h=s("\u514B\u9686 "),_={href:"https://github.com/alist-org/alist",target:"_blank",rel:"noopener noreferrer"},f=s("https://github.com/alist-org/alist"),q=s(" \uFF0C\u5C06\u4E0A\u4E00\u6B65\u7684 "),$=a("code",null,"dist",-1),x=s(" \u76EE\u5F55\u590D\u5236\u5230\u9879\u76EE\u4E0B\u7684 "),V=a("code",null,"public",-1),w=s(" \u76EE\u5F55\u4E0B\uFF0C\u7136\u540E\u6267\u884C\uFF1A"),A=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">appName</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span>
<span class="token assign-left variable">builtAt</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&#39;%F %T %z&#39;</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">goVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go version <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/go version //&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">gitAuthor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> show <span class="token parameter variable">-s</span> <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">&#39;format:%aN &lt;%ae&gt;&#39;</span> HEAD<span class="token variable">)</span></span>
<span class="token assign-left variable">gitCommit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log <span class="token parameter variable">--pretty</span><span class="token operator">=</span>format:<span class="token string">&quot;%h&quot;</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
<span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> describe <span class="token parameter variable">--long</span> <span class="token parameter variable">--tags</span> <span class="token parameter variable">--dirty</span> <span class="token parameter variable">--always</span><span class="token variable">)</span></span>
<span class="token assign-left variable">webVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- <span class="token parameter variable">-t1</span> <span class="token parameter variable">-T2</span> <span class="token string">&quot;https://api.github.com/repos/alist-org/alist-web/releases/latest&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;tag_name&quot;</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/\\&quot;//g;s/,//g;s/ //g&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">ldflags</span><span class="token operator">=</span><span class="token string">&quot;\\
-w -s \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.BuiltAt=<span class="token variable">$builtAt</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GoVersion=<span class="token variable">$goVersion</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitAuthor=<span class="token variable">$gitAuthor</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitCommit=<span class="token variable">$gitCommit</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.Version=<span class="token variable">$version</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.WebVersion=<span class="token variable">$webVersion</span>&#39; \\
&quot;</span>
go build <span class="token parameter variable">-ldflags</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$ldflags</span>&quot;</span> <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function N(X,B){const n=r("ExternalLinkIcon");return l(),i("div",null,[c,a("p",null,[d,a("a",b,[v,e(n)]),k,u,g]),m,a("p",null,[h,a("a",_,[f,e(n)]),q,$,x,V,w]),A])}const y=o(p,[["render",N],["__file","source.html.vue"]]);export{y as default};
