import{c as T,r as V,u as e,N as r,O as n,P as l,a5 as c,a7 as p,Q as o,aa as m,Z as k,ab as z,ac as E,_ as I,a4 as L,G as O}from"./framework-90372ca6.js";import{N as v,a as R}from"./Spin-a0941482.js";import{N as U,a as P}from"./Space-0ce562ed.js";import"./app-83d48c68.js";import"./Close-1bddb6a6.js";const d=s=>(z("data-v-dca143a5"),s=s(),E(),s),j=d(()=>o("b",null,"client_id: ",-1)),A=d(()=>o("b",null,"client_secret: ",-1)),D=d(()=>o("b",null,"redirect_uri: ",-1)),G=d(()=>o("b",null,"refresh_token:",-1)),Q=T({__name:"Callback",setup(s){const i=new URL(window.location.href),u=i.searchParams.get("code"),h=i.searchParams.get("state"),f=i.searchParams.get("error"),B=i.searchParams.get("error_description"),[y,b,g]=atob(h).split("::"),t=V();return u&&!f&&(async()=>{const a=new URLSearchParams;a.append("client_id",y),a.append("client_secret",b),a.append("code",u),a.append("grant_type","authorization_code"),a.append("redirect_uri",g),fetch("https://www.googleapis.com/oauth2/v4/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(_=>_.json()).then(_=>{console.log(_),t.value=_})})(),(a,_)=>!e(u)||e(f)?(r(),n(e(v),{key:0,title:e(f)||"Error",type:"error"},{default:l(()=>[c(p(e(B)),1)]),_:1},8,["title"])):(r(),n(e(P),{key:1,vertical:"",size:"large"},{default:l(()=>{var w,N,C;return[o("p",null,[j,c(p(e(y)),1)]),o("p",null,[A,c(p(e(b)),1)]),o("p",null,[D,c(p(e(g)),1)]),(w=t.value)!=null&&w.error||(N=t.value)!=null&&N.error_description?(r(),n(e(v),{key:0,title:(C=t.value)==null?void 0:C.error,type:"error"},{default:l(()=>[c(p(t.value.error_description),1)]),_:1},8,["title"])):m("v-if",!0),k(e(P),{vertical:""},{default:l(()=>{var x,S;return[G,t.value?m("v-if",!0):(r(),n(e(R),{key:0})),(x=t.value)!=null&&x.refresh_token?(r(),n(e(U),{key:1,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(S=t.value)!=null&&S.access_token?(r(),n(e(v),{key:2,title:"Web client",type:"warning"},{default:l(()=>[c(" The refresh_token is only returned once if you use a web client. ")]),_:1})):m("v-if",!0)]}),_:1})]}),_:1}))}});const W=I(Q,[["__scopeId","data-v-dca143a5"],["__file","Callback.vue"]]),Z=T({__name:"callback.html",setup(s){return(i,u)=>{const h=O("NaiveClient");return r(),L("div",null,[k(h,null,{default:l(()=>[k(e(W))]),_:1})])}}}),M=I(Z,[["__file","callback.html.vue"]]);export{M as default};
