import{f as b,g as s,o as m,c as D,a as u,b as l,t as F,h as _,v as h,e as k,d as e,r as g}from"./app.3079ba61.js";import{_ as A}from"./aliyundrive.df6199d9.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";const y=k('<h1 id="\u963F\u91CC\u4E91\u76D8" tabindex="-1"><a class="header-anchor" href="#\u963F\u91CC\u4E91\u76D8" aria-hidden="true">#</a> \u963F\u91CC\u4E91\u76D8</h1><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u7531\u4E8E\u963F\u91CC\u4E91\u76D8 referer \u7684\u9650\u5236\uFF0C\u5FC5\u987B\u4F7F\u7528\u79FB\u52A8\u7AEF token\u3002 \u4F7F\u7528\u684C\u9762 Web \u4EE4\u724C\u5C06\u5BFC\u81F4\u65E0\u6CD5\u4E0B\u8F7D\u548C\u9884\u89C8\u3002 \u5F53\u7136\uFF0C\u5982\u679C\u4F60\u5728\u672C\u5730\u4F7F\u7528\u6216\u8005\u5E26\u5BBD\u8DB3\u591F\u5927\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u5F00\u542F\u4EE3\u7406\uFF0C\u8BA9\u684C\u9762 Web \u7684 <code>refresh token</code> \u6B63\u5E38\u5DE5\u4F5C\u3002</p></div><h2 id="\u5237\u65B0\u4EE4\u724C" tabindex="-1"><a class="header-anchor" href="#\u5237\u65B0\u4EE4\u724C" aria-hidden="true">#</a> \u5237\u65B0\u4EE4\u724C</h2>',3),w=e("\u6309\u7167\u8FD9\u4E2A "),S={href:"https://github.com/Xhofe/alist/issues/88",target:"_blank",rel:"noopener noreferrer"},T=e("issue"),N=e(" \u5728\u624B\u673A\u4E0A\u6355\u83B7/\u67E5\u627E\u65E5\u5FD7 (/data/media/0/Android/data/com.alicloud.databox/ \u6587\u4EF6/\u65E5\u5FD7/\u8DDF\u8E2A/\uFF09\u3002 \u6216\u8005\u60A8\u53EF\u4EE5\u70B9\u51FB\uFF1A"),z=["disabled"],I={style:{margin:"4px"}},P=["src"],R={class:"custom-container info"},V={class:"custom-container-title"},j=e("API is hosted on "),q={href:"http://replit.com",target:"_blank",rel:"noopener noreferrer"},L=e("replit.com"),O=u("h2",{id:"root-folder-file-id",tabindex:"-1"},[u("a",{class:"header-anchor",href:"#root-folder-file-id","aria-hidden":"true"},"#"),e(" Root folder file_id")],-1),J=u("p",null,"\u6253\u5F00\u963F\u91CC\u4E91\u9A71\u52A8\u5B98\u7F51\uFF0C\u70B9\u51FB\u8FDB\u5165\u8981\u8BBE\u7F6E\u7684\u6587\u4EF6\u5939\u65F6\u70B9\u51FB URL \u540E\u9762\u7684\u5B57\u7B26\u4E32",-1),U=e("\u5982 "),W={href:"https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940",target:"_blank",rel:"noopener noreferrer"},Q=e("https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940"),X=u("p",null,[e("\u8FD9\u4E2A\u6587\u4EF6\u5939\u7684 file_id \u5373\u4E3A "),u("code",null,"5fe01e1830601baf774e4827a9fb8fb2b5bf7940"),e("\uFF1A")],-1),$=u("p",null,[u("img",{src:A,alt:"file_id"})],-1),G=b({__name:"aliyundrive.html",setup(H){const n=s("\u83B7\u53D6 Token"),t=s(0),i=s(""),r=s(""),c=s(""),p=async()=>{n.value="\u7B49\u5F85...",t.value=1;const o=await(await fetch("https://api.nn.ci/alist/ali/qr")).json();console.log(o),n.value="\u4F7F\u7528\u963F\u91CC\u4E91\u76D8 APP \u626B\u63CF\u7136\u540E\u70B9\u51FB",t.value=2,c.value=JSON.stringify({ck:o.content.data.ck,t:o.content.data.t.toString()}),i.value=`https://api.nn.ci/qr/?size=400&text=${encodeURIComponent(o.content.data.codeContent)}`},f=async()=>{t.value=3,n.value="\u7B49\u5F85...";const o=await(await fetch("https://api.nn.ci/alist/ali/ck",{method:"POST",headers:{"Content-Type":"application/json"},body:c.value})).json(),{content:{data:{qrCodeStatus:a,loginResult:C,bizExt:v}}}=o;if(C!=="success"){t.value=2,n.value="\u4F7F\u7528\u963F\u91CC\u4E91\u76D8 App \u626B\u63CF\u7136\u540E\u70B9\u51FB",alert("Status:"+a);return}const B=JSON.parse(atob(v));r.value=B.pds_login_result.refreshToken,n.value="\u83B7\u53D6 Token \u6210\u529F",t.value=4,console.log(o)},E=async()=>{t.value===0&&p(),t.value===2&&f()};return(d,o)=>{const a=g("ExternalLinkIcon");return m(),D("div",null,[y,u("p",null,[w,u("a",S,[T,l(a)]),N]),u("p",null,[u("button",{disabled:t.value===3||t.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:E},F(n.value),9,z)]),_(u("div",I,[u("img",{src:i.value},null,8,P)],512),[[h,i.value]]),_(u("div",null,[u("div",R,[u("p",V,"Token: "+F(r.value),1)])],512),[[h,r.value]]),u("p",null,[u("em",null,[j,u("a",q,[L,l(a)])])]),O,J,u("p",null,[U,u("a",W,[Q,l(a)])]),X,$])}}}),Z=x(G,[["__file","aliyundrive.html.vue"]]);export{Z as default};
