import{f as B,g as s,o as m,c as D,a as u,b as c,t as F,h as _,v as h,e as k,d as o,r as g}from"./app.20ca0f35.js";import{_ as x}from"./aliyundrive.df6199d9.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const y=k('<h1 id="\u963F\u91CC\u4E91\u76D8" tabindex="-1"><a class="header-anchor" href="#\u963F\u91CC\u4E91\u76D8" aria-hidden="true">#</a> \u963F\u91CC\u4E91\u76D8</h1><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u7531\u4E8E\u963F\u91CC\u4E91\u76D8referer\u7684\u9650\u5236\uFF0C\u5FC5\u987B\u4F7F\u7528\u79FB\u52A8token\u3002 \u4F7F\u7528\u684C\u9762 Web \u4EE4\u724C\u5C06\u5BFC\u81F4\u65E0\u6CD5\u4E0B\u8F7D\u548C\u9884\u89C8\u3002 \u5F53\u7136\uFF0C\u5982\u679C\u4F60\u5728\u672C\u5730\u4F7F\u7528\u6216\u8005\u5E26\u5BBD\u8DB3\u591F\u5927\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u5F00\u542F\u4EE3\u7406\uFF0C\u8BA9\u684C\u9762web\u7684<code>refresh token</code>\u53EF\u4EE5\u5DE5\u4F5C\u3002</p></div><h3 id="\u5237\u65B0\u4EE4\u724C" tabindex="-1"><a class="header-anchor" href="#\u5237\u65B0\u4EE4\u724C" aria-hidden="true">#</a> \u5237\u65B0\u4EE4\u724C</h3>',3),w=o("\u6309\u7167\u8FD9\u4E2A"),S={href:"https://github.com/Xhofe/alist/issues/88",target:"_blank",rel:"noopener noreferrer"},T=o("issue"),N=o("\u5728\u624B\u673A\u4E0A\u6355\u83B7/\u67E5\u627E\u65E5\u5FD7(/data/media/0/Android/data/com.alicloud.databox/ \u6587\u4EF6/\u65E5\u5FD7/\u8DDF\u8E2A/\uFF09\u3002 \u6216\u8005\u60A8\u53EF\u4EE5\u70B9\u51FB\uFF1A"),P=["disabled"],z={style:{margin:"4px"}},I=["src"],V={class:"custom-container info"},j={class:"custom-container-title"},q=o("API is hosted on "),O={href:"http://replit.com",target:"_blank",rel:"noopener noreferrer"},R=o("replit.com"),J=u("h3",{id:"root-folder-file-id",tabindex:"-1"},[u("a",{class:"header-anchor",href:"#root-folder-file-id","aria-hidden":"true"},"#"),o(" Root folder file_id")],-1),L=o("\u6253\u5F00\u963F\u91CC\u4E91\u9A71\u52A8\u5B98\u7F51\uFF0C\u70B9\u51FB\u8FDB\u5165\u8981\u8BBE\u7F6E\u7684\u6587\u4EF6\u5939\u65F6\u70B9\u51FBurl\u540E\u9762\u7684\u5B57\u7B26\u4E32\uFF0C\u5982"),Q={href:"https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940%EF%BC%8C%E5%8D%B3%605fe01e1830601baf774e4827a9fb8fb2b5bf7940%60%EF%BC%9A",target:"_blank",rel:"noopener noreferrer"},U=o("https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940\uFF0C\u5373`5fe01e1830601baf774e4827a9fb8fb2b5bf7940`\uFF1A"),W=u("p",null,[u("img",{src:x,alt:"file_id"})],-1),X=B({__name:"aliyundrive.html",setup($){const a=s("\u83B7\u53D6 Token"),e=s(0),i=s(""),r=s(""),l=s(""),f=async()=>{a.value="\u7B49\u5F85...",e.value=1;const t=await(await fetch("https://api.nn.ci/alist/ali/qr")).json();console.log(t),a.value="\u4F7F\u7528\u963F\u91CC\u4E91\u76D8 APP \u626B\u63CF\u7136\u540E\u70B9\u51FB",e.value=2,l.value=JSON.stringify({ck:t.content.data.ck,t:t.content.data.t.toString()}),i.value=`https://api.nn.ci/qr/?size=400&text=${encodeURIComponent(t.content.data.codeContent)}`},p=async()=>{e.value=3,a.value="\u7B49\u5F85...";const t=await(await fetch("https://api.nn.ci/alist/ali/ck",{method:"POST",headers:{"Content-Type":"application/json"},body:l.value})).json(),{content:{data:{qrCodeStatus:n,loginResult:C,bizExt:b}}}=t;if(C!=="success"){e.value=2,a.value="\u4F7F\u7528\u963F\u91CC\u4E91\u76D8 APP \u626B\u63CF\u7136\u540E\u70B9\u51FB",alert("Status:"+n);return}const v=JSON.parse(atob(b));r.value=v.pds_login_result.refreshToken,a.value="\u83B7\u53D6Token\u6210\u529F",e.value=4,console.log(t)},E=async()=>{e.value===0&&f(),e.value===2&&p()};return(d,t)=>{const n=g("ExternalLinkIcon");return m(),D("div",null,[y,u("p",null,[w,u("a",S,[T,c(n)]),N]),u("p",null,[u("button",{disabled:e.value===3||e.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:E},F(a.value),9,P)]),_(u("div",z,[u("img",{src:i.value},null,8,I)],512),[[h,i.value]]),_(u("div",null,[u("div",V,[u("p",j,"Token: "+F(r.value),1)])],512),[[h,r.value]]),u("p",null,[u("em",null,[q,u("a",O,[R,c(n)])])]),J,u("p",null,[L,u("a",Q,[U,c(n)])]),W])}}}),M=A(X,[["__file","aliyundrive.html.vue"]]);export{M as default};
