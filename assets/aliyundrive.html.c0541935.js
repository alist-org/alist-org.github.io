import{m as w,r as s,W as x,X as S,Y as e,a0 as t,Z as c,a2 as u,a3 as f,a4 as p,a1 as b,y as T,_ as A}from"./framework.00b47ed6.js";import{_ as C}from"./aliyundrive.df6199d9.js";const D=b('<h1 id="aliyundrive-share" tabindex="-1"><a class="header-anchor" href="#aliyundrive-share" aria-hidden="true">#</a> Aliyundrive / share</h1><div class="custom-container tip"><p class="custom-container-title">Tips</p><p>Due to the limitation of the referrer of Aliyundrive, the mobile token must be used. Using the desktop web token will result in failure to download and preview. Of course, you can also turn on the proxy so that <code>refresh token</code> of desktop web can work if you use it locally or if the bandwidth is large enough.</p></div><h3 id="refresh-token" tabindex="-1"><a class="header-anchor" href="#refresh-token" aria-hidden="true">#</a> Refresh token</h3>',3),I={href:"https://github.com/Xhofe/alist/issues/88",target:"_blank",rel:"noopener noreferrer"},N=["disabled"],O={style:{margin:"4px"}},P=["src"],R={class:"custom-container info"},j={class:"custom-container-title"},z={href:"http://replit.com",target:"_blank",rel:"noopener noreferrer"},E=e("h3",{id:"root-folder-file-id",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#root-folder-file-id","aria-hidden":"true"},"#"),t(" Root folder file_id")],-1),U={href:"https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940",target:"_blank",rel:"noopener noreferrer"},V=e("code",null,"5fe01e1830601baf774e4827a9fb8fb2b5bf7940",-1),W=b('<p><img src="'+C+'" alt="file_id"></p><h2 id="alibaba-cloud-disk-sharing" tabindex="-1"><a class="header-anchor" href="#alibaba-cloud-disk-sharing" aria-hidden="true">#</a> Alibaba cloud disk sharing</h2><p>Mainly fill in <strong><a href="#refresh-token">refresh token</a>, share ID</strong></p><ul><li><p><strong>Root folder ID</strong> (default root root directory), if you want to write, you can write or not, it is the default root directory</p></li><li><p>Write the <strong>Share pwd</strong> if you have it</p></li></ul><p><img src="https://pic.rmb.bdstatic.com/bjh/257057c4d017ed1c9926f4c6837cf7c1.png" alt="AliShare"></p>',5),q=w({__name:"aliyundrive.html",setup(B){const n=s("Get Token"),o=s(0),r=s(""),l=s(""),d=s(""),_=async()=>{n.value="Waiting...",o.value=1;const a=await(await fetch("https://api.nn.ci/alist/ali/qr")).json();console.log(a),n.value="Use AliyunDrive APP To Scan Then Click",o.value=2,d.value=JSON.stringify({ck:a.content.data.ck,t:a.content.data.t.toString()}),r.value=`https://api.nn.ci/qr/?size=400&text=${encodeURIComponent(a.content.data.codeContent)}`},v=async()=>{o.value=3,n.value="Waiting...";const a=await(await fetch("https://api.nn.ci/alist/ali/ck",{method:"POST",headers:{"Content-Type":"application/json"},body:d.value})).json(),{content:{data:{qrCodeStatus:i,loginResult:k,bizExt:g}}}=a;if(k!=="success"){o.value=2,n.value="Use AliyunDrive APP To Scan Then Click",alert("Status:"+i);return}const y=JSON.parse(atob(g));l.value=y.pds_login_result.refreshToken,n.value="Get Token Success",o.value=4,console.log(a)},m=async()=>{o.value===0&&_(),o.value===2&&v()};return(h,a)=>{const i=T("ExternalLinkIcon");return x(),S("div",null,[D,e("p",null,[t("Follow to this "),e("a",I,[t("issue"),c(i)]),t(" Capture/find the log on the mobile phone (/data/media/0/Android/data/com.alicloud.databox/ files/logs/trace/). Or you can click:")]),e("p",null,[e("button",{disabled:o.value===3||o.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:m},u(n.value),9,N)]),f(e("div",O,[e("img",{src:r.value},null,8,P)],512),[[p,r.value]]),f(e("div",null,[e("div",R,[e("p",j,"Token: "+u(l.value),1)])],512),[[p,l.value]]),e("p",null,[e("em",null,[t("API is hosted on "),e("a",z,[t("replit.com"),c(i)])])]),E,e("p",null,[t("Open the official website of Aliyundrive and click the string behind the url when you click into the folder you want to set, such as "),e("a",U,[t("https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940"),c(i)]),t(", which is "),V,t(":")]),W])}}}),L=A(q,[["__file","aliyundrive.html.vue"]]);export{L as default};
