import{f as x,g as r,o as y,c as w,a as e,d as t,b as c,t as p,h as f,v as h,e as S,r as T}from"./app.15f07433.js";import{_ as C}from"./aliyundrive.df6199d9.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const z=S('<h1 id="阿里云盘" tabindex="-1"><a class="header-anchor" href="#阿里云盘" aria-hidden="true">#</a> 阿里云盘</h1><div class="custom-container tip"><p class="custom-container-title">提示</p><p>由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 <code>refresh token</code> 正常工作。</p></div><h2 id="刷新令牌" tabindex="-1"><a class="header-anchor" href="#刷新令牌" aria-hidden="true">#</a> 刷新令牌</h2>',3),A={href:"https://github.com/Xhofe/alist/issues/88",target:"_blank",rel:"noopener noreferrer"},D=["disabled"],E={style:{margin:"4px"}},I=["src"],P={class:"custom-container info"},R={class:"custom-container-title"},V={href:"http://replit.com",target:"_blank",rel:"noopener noreferrer"},j=e("h2",{id:"root-folder-file-id",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#root-folder-file-id","aria-hidden":"true"},"#"),t(" Root folder file_id")],-1),q=e("p",null,"打开阿里云盘官网，点击进入要设置的文件夹时点击 URL 后面的字符串",-1),B={href:"https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940",target:"_blank",rel:"noopener noreferrer"},L=e("p",null,[t("这个文件夹的 file_id 即为 "),e("code",null,"5fe01e1830601baf774e4827a9fb8fb2b5bf7940"),t("：")],-1),O=e("p",null,[e("img",{src:C,alt:"file_id"})],-1),J=x({__name:"aliyundrive.html",setup(U){const n=r("获取 Token"),o=r(0),i=r(""),l=r(""),d=r(""),_=async()=>{n.value="等待...",o.value=1;const a=await(await fetch("https://api.nn.ci/alist/ali/qr")).json();console.log(a),n.value="使用阿里云盘 APP 扫描然后点击",o.value=2,d.value=JSON.stringify({ck:a.content.data.ck,t:a.content.data.t.toString()}),i.value=`https://api.nn.ci/qr/?size=400&text=${encodeURIComponent(a.content.data.codeContent)}`},v=async()=>{o.value=3,n.value="等待...";const a=await(await fetch("https://api.nn.ci/alist/ali/ck",{method:"POST",headers:{"Content-Type":"application/json"},body:d.value})).json(),{content:{data:{qrCodeStatus:s,loginResult:m,bizExt:k}}}=a;if(m!=="success"){o.value=2,n.value="使用阿里云盘 App 扫描然后点击",alert("Status:"+s);return}const g=JSON.parse(atob(k));l.value=g.pds_login_result.refreshToken,n.value="获取 Token 成功",o.value=4,console.log(a)},b=async()=>{o.value===0&&_(),o.value===2&&v()};return(u,a)=>{const s=T("ExternalLinkIcon");return y(),w("div",null,[z,e("p",null,[t("按照这个 "),e("a",A,[t("issue"),c(s)]),t(" 在手机上捕获/查找日志 (/data/media/0/Android/data/com.alicloud.databox/ 文件/日志/跟踪/）。 或者您可以点击：")]),e("p",null,[e("button",{disabled:o.value===3||o.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:b},p(n.value),9,D)]),f(e("div",E,[e("img",{src:i.value},null,8,I)],512),[[h,i.value]]),f(e("div",null,[e("div",P,[e("p",R,"Token: "+p(l.value),1)])],512),[[h,l.value]]),e("p",null,[e("em",null,[t("API is hosted on "),e("a",V,[t("replit.com"),c(s)])])]),j,q,e("p",null,[t("如 "),e("a",B,[t("https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940"),c(s)])]),L,O])}}}),$=N(J,[["__file","aliyundrive.html.vue"]]);export{$ as default};
